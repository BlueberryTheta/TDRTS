<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TDRTS â€“ WW2 CTF (Prototype)</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' fill='%232f3a2e'/%3E%3Cpath d='M6 8h14l6 4-6 4H6z' fill='%23b08d57'/%3E%3Crect x='8' y='10' width='8' height='6' fill='%23c2b280'/%3E%3C/svg%3E" />
  </head>
  <body>
    <div id="app">
      <div id="hudTop" class="panel" aria-label="Top HUD">
        <div class="hud-item"><span class="hud-label">Player</span> <span class="hud-pill" id="currentPlayerTop">1</span></div>
        <div class="hud-item"><span class="hud-label">Money</span> <span class="hud-pill" id="moneyTop">0</span></div>
        <div class="hud-item"><span class="hud-label">Turn</span> <span class="hud-pill" id="turnTop">1</span></div>
        <div class="hud-spacer"></div>
        <button id="endTurnTop" class="hud-button">End Turn</button>
      </div>
      <div id="left">
        <canvas id="gameCanvas" width="640" height="640"></canvas>
      </div>
      <div id="right">
        <div id="status">
          <div>Current Player: <span id="currentPlayer">1</span></div>
          <div>Money: $<span id="money">0</span></div>
          <div>Turn: <span id="turn">1</span></div>
        </div>
        <hr />
        <div id="shop" class="panel">
          <h2 style="margin-top:0">Requisitions</h2>
          <div class="shop-section-title">Units</div>
          <div class="shop-grid">
            <button class="shop-item" data-unit="Infantry"><span class="thumb"></span><span class="label">Infantry</span><span class="price">$50</span></button>
            <button class="shop-item" data-unit="Tank"><span class="thumb"></span><span class="label">Tank</span><span class="price">$100</span></button>
            <button class="shop-item" data-unit="Artillery"><span class="thumb"></span><span class="label">Artillery</span><span class="price">$120</span></button>
            <button class="shop-item" data-unit="Engineer"><span class="thumb"></span><span class="label">Engineer</span><span class="price">$60</span></button>
            <button class="shop-item" data-unit="Officer"><span class="thumb"></span><span class="label">Officer</span><span class="price">$80</span></button>
            <button class="shop-item" data-unit="Medic"><span class="thumb"></span><span class="label">Medic</span><span class="price">$70</span></button>
            <button class="shop-item" data-unit="Scout"><span class="thumb"></span><span class="label">Scout</span><span class="price">$60</span></button>
            <button class="shop-item" data-unit="MechanizedInfantry"><span class="thumb"></span><span class="label">Mechanized Infantry</span><span class="price">$120</span></button>
          </div>
          <div class="shop-section-title" style="margin-top:10px">Fortifications</div>
          <div class="shop-grid">
            <button class="shop-item" data-fort="Pillbox"><span class="thumb"></span><span class="label">Pillbox</span><span class="price">$80</span></button>
            <button class="shop-item" data-fort="Bunker"><span class="thumb"></span><span class="label">Bunker</span><span class="price">$120</span></button>
            <button class="shop-item" data-fort="BarbedWire"><span class="thumb"></span><span class="label">Barbed Wire</span><span class="price">$30</span></button>
            <button class="shop-item" data-fort="SupplyDepot"><span class="thumb"></span><span class="label">Supply Depot</span><span class="price">$150</span></button>
          </div>
          <div class="hint">Buy and place near base, or Engineers can build adjacent.</div>
        </div>
        <hr />
        <div id="actions" class="panel">
          <h2>Actions</h2>
          <button id="endTurn">End Turn</button>
          <div class="hint">Select a unit to move/attack. Click an enemy to attack if in range.</div>
        </div>
        <hr />
        <div id="unitPanel" class="panel">
          <h2 style="margin-top:0">Selected Unit</h2>
          <div id="unitNone" class="hint">No unit selected.</div>
          <div id="unitInfo" style="display:none">
            <div class="stat-row"><strong id="unitName"></strong> <span id="unitOwner" class="hint"></span> <span id="unitRankBadge" class="badge" style="margin-left:auto">Private</span></div>
            <div class="stat-row"><span style="width:40px">HP</span><div id="unitHpBar" class="bar"><div class="bar-fill" style="width:0%"></div></div><span id="unitHP" class="hint"></span></div>
            <details class="accordion">
              <summary>Details</summary>
              <div id="unitStats">ATK: -, DEF: -, MOVE: -, RNG: -, SIGHT: -</div>
              <div id="unitXP">XP: 0 (<span id="unitRank">Private</span>)</div>
              <div id="unitAbilities">Abilities: -</div>
            </details>
          </div>
        </div>
        <hr />
        <details id="legend" class="panel accordion">
          <summary>Legend</summary>
          <div class="legend-row"><span class="legend-swatch p1"></span> Player 1 Units</div>
          <div class="legend-row"><span class="legend-swatch p2"></span> Player 2 Units</div>
          <div class="legend-row"><span class="legend-swatch base"></span> Base (Flag starts here)</div>
          <div class="legend-row"><span class="legend-swatch flag"></span> Flag</div>
          <div class="legend-row"><span class="legend-swatch spawn"></span> Spawn Tiles</div>
          <div class="legend-row"><span class="legend-swatch fort"></span> Fortification</div>
          <div class="legend-row"><span class="legend-swatch move"></span> Move Range</div>
          <div class="legend-row"><span class="legend-swatch atk"></span> Attack Range</div>
        </details>
        <hr />
        <details id="help" class="panel accordion">
          <summary>How To Play</summary>
          <ul>
            <li>Two players take turns on the same device.</li>
            <li>Earn $10 each turn. Buy units and spawn near your base.</li>
            <li>Select your unit, click a highlighted tile to move.</li>
            <li>Click an enemy in range to attack.</li>
            <li>Capture the enemy flag by moving onto it, then bring it back to your base.</li>
          </ul>
        </details>
      </div>
    </div>
    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="gameOverTitle">
      <div class="modal-content panel">
        <h2 id="gameOverTitle" style="margin-top:0">Game Over</h2>
        <p id="gameOverText">Player 1 captured the flag!</p>
        <div style="margin-top:10px">
          <button id="newGameBtn" class="hud-button">Start New Game</button>
        </div>
      </div>
    </div>
    <!-- Mode Selection Modal (Landing) -->
    <div id="modeModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modeTitle">
      <div class="modal-content panel">
        <h2 id="modeTitle" style="margin-top:0">Select Mode</h2>
        <p class="hint">Choose how you want to play.</p>
        <div style="display:flex; gap:10px; justify-content:center; margin-top:8px">
          <button id="playVsAi" class="hud-button">Play vs Computer</button>
          <button id="playOnline" class="hud-button">Play Online (Friend)</button>
        </div>
        <details id="mpInfo" class="accordion" style="margin-top:10px">
          <summary>Online Multiplayer (preview)</summary>
          <p class="hint">This prototype shows the flow. Next step is wiring a WebSocket server for rooms and turn sync.</p>
        </details>
      </div>
    </div>
    <script type="module" src="src/main.js"></script>
  </body>
  </html>
